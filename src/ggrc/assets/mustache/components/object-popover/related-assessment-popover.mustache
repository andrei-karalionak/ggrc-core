{{!
    Copyright (C) 2017 Google Inc., authors, and contributors
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
}}

<object-popover {item}="selectedAssessment" {popover-title}="selectedAssessmentTitle" {direction}="popoverDirection"
                {popover-link}="selectedAssessmentLink" {popover-title-info}="popoverTitleInfo"
                {hide-title}="hideTitle">
    <tab-container class="related-assessments__tab-container">
        <tab-panel {(panels)}="panels" title-text="Attributes" class="tab-panel">
            <div class="fields-wrapper">
                <show-more {items}="localAttributes">
                    <div class="field-wrapper">
                        <form-validation-icon {validation}="validation"></form-validation-icon>
                        <div class="field__title form-field__title">
                            <label class="field__title-text" for="form-field-{{id}}">{{title}}</label>
                            {{#if helptext}}
                                <i class="fa fa-question-circle field__title-helper-text" rel="tooltip" title="{{helptext}}"></i>
                            {{/if}}
                        </div>
                        <auto-save-form-field-view
                                {type}="type"
                                {value}="value"
                        ></auto-save-form-field-view>
                    </div>
                </show-more>
            </div>
            <div class="tab-panel__section-title">Global attributes</div>
            <div class="fields-wrapper">
                <show-more {items}="globalAttributes">
                    <div class="field-wrapper field-wrapper__no-validation">
                        <div class="field__title form-field__title">
                            <label class="field__title-text" for="form-field-{{id}}">{{title}}</label>
                            {{#if helptext}}
                                <i class="fa fa-question-circle field__title-helper-text" rel="tooltip" title="{{helptext}}"></i>
                            {{/if}}
                        </div>
                        <auto-save-form-field-view
                                {type}="type"
                                {value}="value"
                        ></auto-save-form-field-view>
                    </div>
                </show-more>
            </div>
        </tab-panel>
        <tab-panel {(panels)}="panels" title-text="Comments" class="tab-panel">
            <related-comments {parent-instance}="item.data">
                <mapped-objects
                        {parent-instance}="parentInstance"
                        {related-types}="relatedTypes">
                    <comment-list-item {instance}="instance"></comment-list-item>
                </mapped-objects>
            </related-comments>
        </tab-panel>
    </tab-container>
</object-popover>
